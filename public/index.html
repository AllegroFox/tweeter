<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta Information -->
    <title>Tweeter - Home Page</title>

    <!-- External CSS -->
    <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" type="text/css" />

    <!-- External Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,300i,700,700i" rel="stylesheet">

    <!-- App CSS -->
    <link rel="stylesheet" href="/styles/layout.css" type="text/css" />
    <link rel="stylesheet" href="/styles/nav.css" type="text/css"/>
    <link rel="stylesheet" href="/styles/new-tweet.css" type= "text/css"/>
    <link rel="stylesheet" href="/styles/tweet.css" type="text/css"/>

    <!-- External JS -->
    <script type="text/javascript" src="/vendor/jquery-2.2.3.min.js"></script>

    <!-- App JS -->
    <script type="text/javascript" src="/scripts/app.js"></script>
    <script type="text/javascript" src="/scripts/composer-char-counter.js"></script>

  </head>

  <body>

    <!-- Top nav bar (fixed) -->
    <nav id="nav-bar">
      <img class="logo" src="/images/bird.png">
      <span class="header">Tweeter</span>
    </nav>


    <!-- Page-specific (main) content here -->
    <main class="container">

      <section class="new-tweet">
        <h2 id="new-tweet-header">Compose Tweet</h2>
        <form action="/tweets" method="POST">
          <textarea class= "text-area" name="text" placeholder="What are you humming about?"></textarea>
          <footer>
            <input id="new-post-button" type="submit" value="Tweet">
            <span class="counter">140</span>
          </footer>
        </form>
      </section>

      <section id="tweet-container">

      </section>

    </main>

  </body>

  <script>
    $(function() {

      $( "form" ).on( "submit", function( event ) {
        event.preventDefault();
        const text = $(this).serialize();
        console.log(text.length);
        if (text.length < 6){
          alert("Tweet is empty!");
        } else if (text.length > 146){
          alert("Your tweet is too long!");
        } else {
          $.ajax({
            url: '/tweets',
            method: 'POST',
            data: text
          })
          .then(function (text) {
            console.log('Success: ', text);
            loadTweets();
          });
        }
      });
    });
  </script>

</html>
